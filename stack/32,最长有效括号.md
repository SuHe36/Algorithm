给你一个只包含 '(' 和 ')' 的字符串，找出最长有效（格式正确且连续）括号子串的长度。

 

示例 1：

输入：s = "(()"
输出：2
解释：最长有效括号子串是 "()"
示例 2：

输入：s = ")()())"
输出：4
解释：最长有效括号子串是 "()()"
示例 3：

输入：s = ""
输出：0
 

提示：

0 <= s.length <= 3 * 104
s[i] 为 '(' 或 ')'


思路：要用栈来保存左括号，这里要注意这种'()((())))'前后两个有效括号[()和((()))]能连起来的情况。而且要求的是括号的长度，所以我们用栈来存储每个括号的index。

并且用-1来初始化栈，这样当遇到右括号时，如果栈顶是左括号，可以直接出栈，然后剩下的栈顶元素就是前面的完整括号序列的左端点。当前后两个序列要连在一起的时候，此时栈顶元素就是-1，也可以视为整个完整序列的左端点。


具体代码如下：
```
class Solution:
    def longestValidParentheses(self, s: str) -> int:
        res = 0

        stack = [-1]

        for i in range(len(s)):
            c = s[i]

            if c == '(':
                stack.append(i)
            elif c == ')':
                if stack[-1] >= 0 and s[stack[-1]]=='(':
                    stack.pop()
                    ans = i - stack[-1]
                    res = max(res,ans)
                else:
                    stack.append(i)
        return res

```